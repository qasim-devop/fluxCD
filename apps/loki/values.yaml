apiVersion: v1
kind: ConfigMap
metadata:
  name: loki-values
  namespace: monitoring
data:
  values.yaml: |
    deploymentMode: SingleBinary

    loki:
      auth_enabled: false

    singleBinary:
      replicas: 1

    # CRITICAL: disable ALL simpleScalable components
    simpleScalable:
      enabled: false
      write:
        replicas: 0
      read:
        replicas: 0
      backend:
        replicas: 0
      gateway:
        replicas: 0
      chunksCache:
        enabled: false

    # Loki filesystem storage for local/minikube
    storage:
      type: filesystem

    persistence:
      enabled: true
      size: 5Gi
      storageClass: ""

    # Expose the gateway (Promtail uses this)
    gateway:
      enabled: true
      service:
        type: ClusterIP

    service:
      type: ClusterIP
